![image](https://github.com/xxhhww/ema/blob/main/image/%E5%9B%BE%E7%89%871.png)

线程模型：
主线程只处理监听套接字，连接套接字由工作线程来处理。
当有新的连接到来时，主线程对监听套接字调用accept()方法，然后将获得的连接套接字通过某种规则派送给对应的工作线程。此后，该连接套接字上的所有I/O操作都有此工作线程来负责，直到客户关闭连接。

![image](https://github.com/xxhhww/ema/blob/main/image/%E5%9B%BE%E7%89%872.png)

协程模型：
主协程负责调度其他所有协程。也就是说，其他所有协程的创建与切入都必须由主协程控制，同样的，其他所有协程的切出必须返回到主协程。
当主协程没有任务分配，不需要启动任务协程时，主协程切入事件循环协程。
事件循环协程运行epoll_wait()方法，检测套接字上注册事件是否触发，或者定时事件是否超时。一旦有事件触发，它便将事件对应的工作协程放入对应的容器之中，然后自我切出，将运行权送回给主协程。
工作协程负责处理响应事件对应的任务。
